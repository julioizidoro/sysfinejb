<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <link href="../../resources/css/cssteste.css" rel="stylesheet" type="text/css" />
        <!-- Bootstrap core CSS -->
        <link href="../../resources/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen"/>

        <!-- Font Awesome -->
        <link href="../../resources/css/font-awesome.min.css" rel="stylesheet"/>
    </h:head>


    <h:body style="background:white;" >
        <f:view encoding="ISO-8859-1">
            <h:form id="idFrmCadContasPagar" class="body2" style="font-size: 12px; background-color: #FCFBF8;" enctype="multipart/form-data">
                <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />

                <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false" >
                    <p:outputLabel value="Aguarde.." style="font-family: 'Pacifico',cursive;"/>
                    <br/> 
                    <img src="../../resources/img/ajax-carregando.gif" />
                </p:dialog>

                <title  >Novo Pagamento</title>
                <p:growl id="growl" showDetail="true" sticky="false" life="3000"/> 

                <h:panelGrid columns="2"  style="margin-left: 2%;width: 100%;">
                    <h:panelGroup>
                        <h:outputLabel for="cliente" style="margin-left: 2%;" class="left3">Unidade</h:outputLabel>
                        <br/>
                        <p:selectOneMenu  id="cliente"  style="width: 200px;margin-left: 2%"  value="#{cadContasPagarMB.cliente}" converter="ClienteConverter"
                                          filter="true" filterMatchMode="contains" panelStyle="width:180px" disabled="#{cadContasPagarMB.habilitarUnidade}">
                            <f:selectItem  itemLabel="Selecione" itemValue="0" noSelectionOption="true"/> 
                            <f:selectItems  value="#{cadContasPagarMB.listaCliente}" var="clienteselecionado" itemLabel="#{clienteselecionado.nomeFantasia}" itemValue="#{clienteselecionado}"/>
                            <f:attribute name="listaCliente" value="#{cadContasPagarMB.listaCliente}"/>
                            <p:ajax event="change" listener="#{cadContasPagarMB.gerarListaBanco()}" update="idconta"/>
                            <p:ajax event="change" listener="#{cadContasPagarMB.gerarListaPlanoContas()}" update="idPlanoConta"/>
                        </p:selectOneMenu> 
                    </h:panelGroup> 
                    <h:panelGroup>
                        <div class="form-group" >
                            <h:outputLabel for="dataEnv" style="margin-left:53%; ">Data de Envio</h:outputLabel>
                            <br/>
                            <p:inputMask id="dataEnv" mask="99/99/9999" style="width: 34%;float: right;margin-right: 15%;"  class="form-control" value="#{cadContasPagarMB.dataEnvio()}"  readonly="true">
                                <f:convertDateTime   pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo"/>
                            </p:inputMask>
                        </div>
                    </h:panelGroup>
                </h:panelGrid>
                <hr/>	 
                <h:panelGrid columns="3"  style="margin-left: 2%;width: 95%;">
                    <h:panelGroup>
                        <div class="form-group" >
                            <h:outputLabel for="fornecedor">Fornecedor</h:outputLabel>
                            <h:inputText  class="form-control" id="fornecedor" style="width: 80%;" value="#{cadContasPagarMB.contaPagar.fornecedor}"/>
                        </div>
                    </h:panelGroup> 
                    <h:panelGroup>
                        <div class="form-group" >
                            <h:outputLabel for="nDocumento">N° Documento</h:outputLabel>
                            <h:inputText  class="form-control" id="nDocumento" style="width: 80%;" value="#{cadContasPagarMB.contaPagar.numeroDocumento}"/>
                        </div>
                    </h:panelGroup>
                    <h:panelGroup>
                        <p:commandLink  title="#{cadContasPagarMB.consultarArquivos()}" style="margin-left: 10%;text-decoration: none"   action="#{cadContasPagarMB.anexarArquivo()}" >
                            
                            <i class="fa fa-paperclip" style="font-size: 34px; #{cadContasPagarMB.retornarCorAnexo()}"/>
                        </p:commandLink>
                        <h:outputLabel value="#{cadContasPagarMB.nomeAnexo()}" />
                    </h:panelGroup>
                </h:panelGrid>
                <h:panelGrid columns="2"  style="margin-left: 2%;width: 81%;">
                    <h:panelGroup>
                        <div class="form-group" >
                            <h:outputLabel for="valor">Valor</h:outputLabel>
                            <h:inputText  class="form-control" id="valor" style="width: 63%;text-align: right;" value="#{cadContasPagarMB.contaPagar.valor}">
                                <f:convertNumber pattern="##,###,###,###.##"/>
                            </h:inputText>
                        </div>
                    </h:panelGroup> 
                    <h:panelGroup>
                        <div class="form-group" >
                            <h:outputLabel for="descricao">Descrição</h:outputLabel>
                            <h:inputText  class="form-control" id="descricao" style="width: 126%;" value="#{cadContasPagarMB.contaPagar.descricao}"/>
                        </div>
                    </h:panelGroup>
                </h:panelGrid>
                <h:panelGrid columns="3"  style="margin-left: 2%;width: 106%;">
                    <h:panelGroup>
                        <div class="form-group" >
                            <h:outputLabel for="dataVenc">Vencimento</h:outputLabel>
                            <p:inputMask id="dataVenc"   mask="99/99/9999" size="11"  class="form-control"  value="#{cadContasPagarMB.contaPagar.dataVencimento}" style="width: 80%;">
                                <f:convertDateTime   pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo"/>
                            </p:inputMask>
                        </div>
                    </h:panelGroup> 
                    <h:panelGroup>
                        <h:outputLabel value="Conta" for="idconta" />
                        <br/>
                        <p:selectOneMenu id="idconta" class="left3" style="width:150px;"  value="#{cadContasPagarMB.banco}"  converter="BancoConverter"
                                         filter="true" filterMatchMode="contains" panelStyle="width:150px">
                            <f:selectItem itemLabel="Selecione" itemValue="0" noSelectionOption="true" /> 
                            <f:selectItems value="#{cadContasPagarMB.listaBanco}" var="bancoSelecionado"  itemLabel="#{bancoSelecionado.nome}" itemValue="#{bancoSelecionado}"/>
                            <f:attribute name="listaBanco" value="#{cadContasPagarMB.listaBanco}" />

                        </p:selectOneMenu> 
                    </h:panelGroup>
                    <h:panelGroup>
                        <p:outputLabel value="Forma" for="formaPaga" class="left2" />   
                        <br/>
                        <p:selectOneMenu id="formaPaga" class="left5" style="width:156px;"  value="#{cadContasPagarMB.contaPagar.formaPagamento}">
                            <f:selectItem itemLabel="Selecione" itemValue="sn" noSelectionOption="true"/> 
                            <f:selectItem itemLabel="Cartão" itemValue="Cartao" />  
                            <f:selectItem itemLabel="Débito em Conta" itemValue="debito em conta" /> 
                            <f:selectItem itemLabel="Boleto" itemValue="Boleto" />  
                            <f:selectItem itemLabel="Dinheiro" itemValue="Dinheiro" />
                            <f:selectItem itemLabel="Cheque" itemValue="Cheque" />  
                            <f:selectItem itemLabel="Depósito" itemValue="Deposito" />
                            <f:selectItem itemLabel="Transferencia" itemValue="Transferencia"/>
                            <p:ajax event="change" listener="#{cadContasPagarMB.transferenciaBancaria()}"  update="renderizar"/>   
                        </p:selectOneMenu>
                    </h:panelGroup>
                </h:panelGrid>
                <hr />
                <h:panelGrid columns="2"  style="margin-left: 2%;width: 100%;">
                    <h:panelGroup>
                        <h:outputLabel value="Plano de Contas" for="idPlanoConta" class="left3"/>
                        <br/>
                        <p:selectOneMenu id="idPlanoConta" class="left3" style="width:320px;"  value="#{cadContasPagarMB.planoContas}" converter="PlanoContasConverter"
                                         filter="true" filterMatchMode="contains" panelStyle="width:200px">
                            <f:selectItem itemLabel="Selecione" itemValue="0" noSelectionOption="true"/> 
                            <f:selectItems value="#{cadContasPagarMB.listaPlanoContas}" var="planoContaselecionado" itemLabel="#{planoContaselecionado.descricao}" itemValue="#{planoContaselecionado}"/>
                            <f:attribute name="listaPlanoConta" value="#{cadContasPagarMB.listaPlanoContas}"/>
                        </p:selectOneMenu> 
                    </h:panelGroup> 
                    <h:panelGroup>
                        <div class="form-group" >
                            <h:outputLabel for="competencia">Competência</h:outputLabel>
                            <p:inputMask style="margin-left:2%;width: 71%;" id="competencia" label="competencia" value="#{cadContasPagarMB.contaPagar.competencia}" mask="99/9999"  class="form-control"/>
                        </div>
                    </h:panelGroup>
                </h:panelGrid>
                <h:panelGrid columns="2"  style="margin-left: 2%;width: 100%;">
                    <h:panelGroup>
                        <div class="form-group" >
                            <h:outputLabel for="dataAgen">Agendamento</h:outputLabel>
                            <p:inputMask id="dataAgen"   mask="99/99/9999" maxlength="15" class="form-control" value="#{cadContasPagarMB.contaPagar.dataAgendamento}" style="width: 40%;">
                                <f:convertDateTime   pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo"/>
                            </p:inputMask>
                        </div>
                    </h:panelGroup> 
                    <h:panelGroup>
                        <div class="form-group" >
                            <h:outputLabel for="dataComp">Compensação</h:outputLabel>
                            <p:inputMask style="width: 40%;" id="dataComp"  mask="99/99/9999" size="12" maxlength="15" class="form-control" value="#{cadContasPagarMB.contaPagar.dataCompensacao}">
                                <f:convertDateTime   pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo"/>
                            </p:inputMask>
                        </div>
                    </h:panelGroup>
                </h:panelGrid>
                <hr />
                <h:panelGroup id="renderizar">
                    <h:panelGrid id="idtransferencia" columns="3"  rendered="#{cadContasPagarMB.selecionada}" style="width: 100%;margin-left: 2%;">
                        <h:panelGroup>
                            <div class="form-group" >
                                <h:outputLabel for="banco">Banco</h:outputLabel>
                                <h:inputText  class="form-control" id="banco" style="width: 63%;text-align: right;" value="#{cadContasPagarMB.cptransferencia.banco}"/>
                            </div>
                        </h:panelGroup> 
                        <h:panelGroup>
                            <div class="form-group" >
                                <h:outputLabel for="agencia">Agência</h:outputLabel>
                                <h:inputText  class="form-control" id="agencia" style="width: 56%;" value="#{cadContasPagarMB.cptransferencia.agencia}"/>
                            </div>
                        </h:panelGroup>
                        <h:panelGroup>
                            <div class="form-group" >
                                <h:outputLabel for="contabanco">Conta</h:outputLabel>
                                <h:inputText  class="form-control" id="contabanco" style="width: 70%;" value="#{cadContasPagarMB.cptransferencia.conta}"/>
                            </div>
                        </h:panelGroup>
                    </h:panelGrid>
                    <h:panelGrid id="idtransferencia2" columns="2"  rendered="#{cadContasPagarMB.selecionada}" style="width: 100%;margin-left: 2%;">
                        <h:panelGroup>
                            <div class="form-group" >
                                <h:outputLabel for="beneficiario">Beneficiário</h:outputLabel>
                                <h:inputText  class="form-control" id="beneficiario" style="width: 82%;" value="#{cadContasPagarMB.cptransferencia.beneficiario}"/>
                            </div>
                        </h:panelGroup>
                        <h:panelGroup>
                            <div class="form-group" >
                                <h:outputLabel for="cpfcnpj">CPF/CNPJ</h:outputLabel>
                                <h:inputText  class="form-control" id="cpfcnpj" style="width: 80%;" value="#{cadContasPagarMB.cptransferencia.cpfcnpj}"/>
                            </div>
                        </h:panelGroup>
                    </h:panelGrid>
                    <h:panelGrid columns="3" style="margin-left:40%;" > 
                        <p:commandLink title="Confirmar" style="text-decoration: none" update="growl"  action="#{cadContasPagarMB.salvar()}" >
                            <img src="../../resources/img/confirmarS.png" width="50" height="50"/>
                        </p:commandLink>
                        <p:menuButton value="" style="background:transparent; border:none; margin-left:-80%; margin-top:100%; font-size:51%;"> 
                            <p:menuitem value="Salvar" action="#{cadContasPagarMB.salvar()}" update="growl" icon="ui-icon-disk"/>
                            <p:menuitem value="Salvar e repetir"  action="#{cadContasPagarMB.salvarRepetir()}" ajax="false" icon="ui-icon-arrowrefresh-1-w" actionListener="#{mensagem.saveMessagem()}" update="growl"/>
                        </p:menuButton>
                        <p:commandLink title="Cancelar" style="margin-left: 3%;text-decoration: none"   action="#{cadContasPagarMB.cancelar()}" >
                            <img src="../../resources/img/cancelarS.png" width="50" height="50"/>
                        </p:commandLink>
                    </h:panelGrid>
                </h:panelGroup> 
            </h:form>
        </f:view>
    </h:body>
</html>
